(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{523:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("è‡ªä»ç¬¬ä¸€ä¸ªå…³äº"),a("a",{attrs:{href:"https://reactjs.org/hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks"),a("OutboundLink")],1),t._v("çš„ alpha ç‰ˆæœ¬å‘å¸ƒä»¥æ¥ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ä¸æ–­å‡ºç°åœ¨è®¨è®ºä¸­ï¼šâ€œä¸ºä»€ä¹ˆæ˜¯ Hook è€Œé "),a("em",[t._v("<ä¸€äº›å…¶ä»–çš„ API>")]),t._v(" ï¼Ÿâ€")]),t._v(" "),a("p",[t._v("æç¤ºä¸€ä¸‹ï¼Œä»¥ä¸‹çš„è¿™äº›å°±"),a("em",[t._v("æ˜¯")]),t._v("Hooksï¼š")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#usestate",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("useState()")]),a("OutboundLink")],1),t._v(" ç”¨äºå£°æ˜ä¸€ä¸ªçŠ¶æ€å˜é‡ã€‚")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#useeffect",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("useEffect()")]),a("OutboundLink")],1),t._v(" ç”¨äºå£°æ˜ä¸€ä¸ªè¡¥å……è§„åˆ™(side effect)ã€‚")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#usecontext",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("useContext()")]),a("OutboundLink")],1),t._v(" ç”¨äºè¯»å–ä¸€äº›ä¸Šä¸‹æ–‡çš„å†…å®¹ã€‚")])]),t._v(" "),a("p",[t._v("ä½†æ˜¯ä»æœ‰ä¸€äº›å…¶ä»–çš„ APIï¼Œä¾‹å¦‚"),a("code",[t._v("React.memo()")]),t._v("å’Œ"),a("code",[t._v("<Context.Provider>")]),t._v("ï¼Œå®ƒä»¬"),a("em",[t._v("ä¸æ˜¯")]),t._v("Hooksã€‚é€šå¸¸æå‡ºçš„ Hook ç‰ˆæœ¬ä¼šå»ºè®®æ˜¯"),a("em",[t._v("noncompositional")]),t._v("æˆ–è€…"),a("em",[t._v("antimodular")]),t._v("ã€‚æœ¬æ–‡å°†å¸®åŠ©ä½ äº†è§£åŸå› ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æç¤ºï¼šè¿™ç¯‡æ–‡ç« å¯¹é‚£äº›å¯¹ API è®¨è®ºæ„Ÿå…´è¶£çš„äººæ¥è¯´æ˜¯ä¸€ä¸ªæ·±åˆ»çš„è¯é¢˜ï¼Œä½ ä¸éœ€è¦è€ƒè™‘ä½¿ç”¨ React æ¥æå‡æ•ˆç‡ï¼")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("æˆ‘ä»¬å¸Œæœ› React API ä¿ç•™ä¸¤ä¸ªé‡è¦å±æ€§ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("æ„æˆ Composition:")]),t._v(" "),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-custom.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®šåˆ¶ Hooks"),a("OutboundLink")],1),t._v("å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯æˆ‘ä»¬å¯¹ Hooks API æ„Ÿåˆ°å…´å¥‹çš„åŸå› ã€‚æˆ‘ä»¬å¸Œæœ›å¤§å®¶å¯ä»¥é¢‘ç¹çš„æ„å»ºè‡ªå·±çš„ Hooksï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦ä¿è¯ä¸åŒäººå†™çš„ Hooks"),a("a",{attrs:{href:"https://overreacted.io/why-do-hooks-rely-on-call-order/#flaw-4-the-diamond-problem",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸ä¼šå‘ç”Ÿå†²çª"),a("OutboundLink")],1),t._v("ã€‚ï¼ˆæˆ‘ä»¬å¤§æ¦‚ä¼šè¢«ç¼–å†™æ¸…çˆ½ä¸”ä¸ä¼šç›¸äº’ç ´åçš„ç»„ä»¶è¿™æ ·çš„ä½“éªŒå® åå§ï¼ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("è°ƒè¯• Debugging:")]),t._v(" æˆ‘ä»¬å¸Œæœ›éšç€ç¨‹åºçš„å¢é•¿ï¼ŒBugs"),a("RouterLink",{attrs:{to:"/archives/algorithm/1549245751.html"}},[t._v("å¾ˆå®¹æ˜“æ‰¾åˆ°")]),t._v("ã€‚React çš„æœ€ä½³ç‰¹å¾ä¹‹ä¸€å°±æ˜¯â€”â€”å¦‚æœä½ çœ‹åˆ°å‘ˆç°å‡ºäº†ä»»ä½•é”™è¯¯ï¼Œéƒ½èƒ½å¤Ÿé€šè¿‡ç»“æ„æ ‘æ‰¾åˆ°é‚£ä¸ªç»„ä»¶çš„ prop æˆ– state å¯¼è‡´çš„é”™è¯¯ã€‚")],1)]),t._v(" "),a("p",[t._v("è¿™ä¸¤ä¸ªçº¦æŸæ”¾åœ¨ä¸€èµ·å¯ä»¥å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆå¯ä»¥æˆ–"),a("em",[t._v("ä¸å¯ä»¥")]),t._v("ä½¿ç”¨ Hookã€‚è®©æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­ã€‚")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ä½¿ç”¨-hook-usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-hook-usestate"}},[t._v("#")]),t._v(" ä½¿ç”¨ Hookï¼š"),a("code",[t._v("useState()")])]),t._v(" "),a("h3",{attrs:{id:"æ„æˆ-composition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ„æˆ-composition"}},[t._v("#")]),t._v(" æ„æˆ Composition")]),t._v(" "),a("p",[t._v("æ¯ä¸ªè°ƒç”¨"),a("code",[t._v("useState()")]),t._v("çš„å¤šä¸ªè‡ªå®šä¹‰ Hook éƒ½ä¸ä¼šå†²çªï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMyCustomHook1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// What happens here, stays here.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMyCustomHook2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// What happens here, stays here.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMyCustomHook1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMyCustomHook2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("æ·»åŠ ä¸€ä¸ªæ–°çš„æ— æ¡ä»¶"),a("code",[t._v("useState()")]),t._v("è°ƒç”¨æ€»æ˜¯å®‰å…¨çš„ã€‚ä½ ä¸éœ€è¦äº†è§£ç»„ä»¶ç”¨äºå£°æ˜æ–°çŠ¶æ€å˜é‡çš„å…¶ä»– Hookï¼Œä¹Ÿä¸èƒ½é€šè¿‡æ›´æ–°å…¶ä¸­ä¸€ä¸ªæ¥ç ´åå…¶ä»–çš„çŠ¶æ€å˜é‡ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ç»“è®ºï¼š")]),t._v(" âœ… "),a("code",[t._v("useState()")]),t._v("ä¸ä¼šä½¿è‡ªå®šä¹‰ Hook æ˜“ç¢ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è°ƒè¯•-debugging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒè¯•-debugging"}},[t._v("#")]),t._v(" è°ƒè¯• Debugging")]),t._v(" "),a("p",[t._v("é’©å­ä¼šå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºä½ å¯ä»¥ç”¨è¿‡å®ƒ"),a("em",[t._v("ä¼ é€’")]),t._v("å€¼ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTheme")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("isMobile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Comment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMobile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MOBILE_VIEWPORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" theme "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTheme")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMobile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("section className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("comment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("section"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[t._v("ä½†æ˜¯å¦‚æœæˆ‘ä»¬çŠ¯é”™äº†å‘¢ï¼Ÿè¯¥å¦‚ä½•è°ƒè¯•ï¼Ÿ")]),t._v(" "),a("p",[t._v("å‡è®¾æˆ‘ä»¬ä»"),a("code",[t._v("theme.comment")]),t._v("è·å¾—çš„ CSS ç±»æ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è°ƒè¯•ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶çš„ä¸»ä½“ä¸­è®¾ç½®æ–­ç‚¹æˆ–å‡ ä¸ªæ—¥å¿—è¾“å‡ºã€‚")]),t._v(" "),a("p",[t._v("ä¹Ÿè®¸æˆ‘ä»¬ä¼šçœ‹åˆ°"),a("code",[t._v("theme")]),t._v("é”™è¯¯ä½†æ˜¯"),a("code",[t._v("width")]),t._v("å’Œ"),a("code",[t._v("isMobile")]),t._v("æ˜¯æ­£ç¡®çš„ã€‚è¿™ä¼šå‘Šè¯‰æˆ‘ä»¬é—®é¢˜æ˜¯"),a("code",[t._v("useTheme()")]),t._v("ä¸­çš„ã€‚æˆ–è€…ä¹Ÿè®¸æˆ‘ä»¬ä¼šçœ‹åˆ°"),a("code",[t._v("width")]),t._v("æœ¬èº«å°±æ˜¯é”™çš„ï¼Œé‚£æˆ‘ä»¬å°±åº”è¯¥æŸ¥çœ‹"),a("code",[t._v("useWindowWidth()")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("**å•ç‹¬æŸ¥çœ‹ä¸­é—´å€¼ä¼šå‘Šè¯‰æˆ‘ä»¬é¡¶å±‚çš„é‚£äº› Hook åŒ…å« Bugã€‚**æˆ‘ä»¬ä¸éœ€è¦æŸ¥çœ‹ä»–ä»¬"),a("em",[t._v("æ‰€æœ‰çš„")]),t._v("å®ç°ã€‚")]),t._v(" "),a("p",[t._v("ç„¶åæˆ‘ä»¬å¯ä»¥â€œæ”¾å¤§â€æœ‰ Bug çš„éƒ¨åˆ†å¹¶å°è¯•å¤ç°ã€‚")]),t._v(" "),a("p",[t._v("éšç€è‡ªå®šä¹‰ Hook åµŒå¥—çš„æ·±åº¦å¢åŠ ï¼Œè¿™ä¼šå˜å¾—æ›´åŠ é‡è¦ã€‚æƒ³è±¡æˆ‘ä»¬æœ‰ 3 ä¸ªçº§åˆ«çš„è‡ªå®šä¹‰ Hook åµŒå¥—ï¼Œæ¯ä¸ªçº§åˆ«ä½¿ç”¨ 3 ä¸ªä¸åŒçš„è‡ªå®šä¹‰ Hooksã€‚å¯»æ‰¾"),a("strong",[t._v("3 å¤„")]),t._v("ä¸æ½œåœ¨æ£€æŸ¥"),a("strong",[t._v("3 + 3Ã—3 + 3Ã—3Ã—3 = 39 å¤„")]),t._v("ä¹‹é—´çš„"),a("RouterLink",{attrs:{to:"/archives/algorithm/1549245751.html"}},[t._v("å·®å¼‚")]),t._v("æ˜¯å·¨å¤§çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œ"),a("code",[t._v("useState()")]),t._v("ä¸èƒ½ç¥å¥‡çš„â€œå½±å“â€å…¶ä»–é’©å­æˆ–ç»„ä»¶ï¼Œå®ƒè¿”å›çš„é”™è¯¯å€¼ä¼šåœ¨å®ƒåé¢ç•™ä¸‹ä¸€æ¡ç—•è¿¹ï¼Œå°±åƒä»»ä½•å˜é‡ä¸€æ ·ã€‚ğŸ›")],1),t._v(" "),a("p",[a("strong",[t._v("ç»“è®ºï¼š")]),t._v(" âœ… "),a("code",[t._v("useState()")]),t._v("ä¸ä¼šé®æ©æˆ‘ä»¬ä»£ç ä¸­çš„å› æœå…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ç—•è¿¹è¿½è¸ªåˆ° Bugã€‚")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ä¸åº”ä½¿ç”¨-hook-usebailout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸åº”ä½¿ç”¨-hook-usebailout"}},[t._v("#")]),t._v(" ä¸åº”ä½¿ç”¨ Hookï¼š"),a("code",[t._v("useBailout()")])]),t._v(" "),a("p",[t._v("ä½œä¸ºä¼˜åŒ–ï¼Œä½¿ç”¨ Hooks çš„ç»„ä»¶å¯ä»¥é¿å…é‡æ–°æ¸²æŸ“ã€‚")]),t._v(" "),a("p",[t._v("ä¸€ç§æ–¹æ³•æ˜¯å°†æ•´ä¸ªç»„ä»¶å‘¨å›´æ–¹å¼ä¸€ä¸ª"),a("a",{attrs:{href:"https://reactjs.org/blog/2018/10/23/react-v-16-6.html#reactmemo",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("React.memo()")]),a("OutboundLink")],1),t._v("åŒ…è£…å™¨ã€‚å¦‚æœ props ä¸æˆ‘ä»¬åœ¨ä¸Šä¸€æ¬¡æ¸²æŸ“çš„è¿‡ç¨‹ä¸­çš„ props éå¸¸ç›¸ç­‰ï¼Œä»–å°±ä¼šå¤±å»é‡æ–°æ¸²æŸ“çš„æ•ˆæœï¼Œè¿™å¾ˆç±»ä¼¼"),a("code",[t._v("PureComponent")]),t._v("ç±»ã€‚")]),t._v(" "),a("p",[a("code",[t._v("React.memo()")]),t._v("æ¥å—ä¸€ä¸ªç»„ä»¶å¹¶è¿”å›ä¸€ä¸ªç»„ä»¶ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[a("strong",[t._v("ä½†æ˜¯ä¸ºä»€ä¹ˆå®ƒä¸ä»…æ˜¯ä¸ª Hook?")])]),t._v(" "),a("p",[t._v("æ— è®ºä½ å°†å®ƒæˆä¸º"),a("code",[t._v("useShouldComponentUpdate()")]),t._v("ï¼Œ"),a("code",[t._v("usePure()")]),t._v("ï¼Œ"),a("code",[t._v("useSkipRender()")]),t._v("æˆ–"),a("code",[t._v("useBailout()")]),t._v("ï¼Œè¿™ä¸ªä½“éªŒå¾€å¾€çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âš ï¸ Not a real API")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useBailout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevColor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" prevColor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button-"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("OK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("è¿˜æœ‰ä¸€äº›å˜åŒ–ï¼ˆegï¼šä¸€ä¸ªç®€å•çš„"),a("code",[t._v("usePure()")]),t._v("æ ‡è®°ï¼‰ä½†æ˜¯åœ¨å¹¿æ³›çš„ç¬”åˆ’ä¸­ä»–ä»¬å…·æœ‰ç›¸åŒçš„ç¼ºé™·ã€‚")]),t._v(" "),a("h3",{attrs:{id:"æ„æˆ-composition-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ„æˆ-composition-2"}},[t._v("#")]),t._v(" æ„æˆ Composition")]),t._v(" "),a("p",[t._v("å‡è®¾æˆ‘ä»¬å°è¯•å°†"),a("code",[t._v("useBailout()")]),t._v("æ”¾åœ¨ä¸¤ä¸ªè‡ªå®šä¹‰ Hooks ä¸­ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("friendID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setIsOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âš ï¸ Not a real API  useBailout(prevIsOnline => prevIsOnline !== isOnline, isOnline);")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleStatusChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("status")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIsOnline")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleStatusChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleStatusChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âš ï¸ Not a real API  useBailout(prevWidth => prevWidth !== width, width);")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleResize")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("p",[t._v("ç°åœ¨å¦‚æœä½ åœ¨åŒä¸€ä¸ªç»„ä»¶ä½¿ç”¨å®ƒä»¬ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ChatThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isTyping "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isOnline "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChatLayout width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("FriendStatus isOnline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isTyping "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Typing..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ChatLayout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ï¼Ÿ")]),t._v(" "),a("p",[t._v("å¦‚æœæ¯ä¸ª"),a("code",[t._v("useBailout()")]),t._v("è°ƒç”¨éƒ½æœ‰æƒè·³è¿‡æ›´æ–°ï¼Œé‚£ä¹ˆæ¥è‡ª"),a("code",[t._v("useWindowWidth()")]),t._v("çš„æ›´æ–°å°†è¢«"),a("code",[t._v("useFriendStatus()")]),t._v("é˜»å¡ï¼Œåä¹‹äº¦ç„¶ã€‚"),a("strong",[t._v("è¿™äº› Hook ä¼šç›¸äº’ç ´åã€‚")])]),t._v(" "),a("p",[t._v("ä½†æ˜¯ï¼Œå¦‚æœ"),a("code",[t._v("useBailout()")]),t._v("å°½åœ¨å•ä¸ªç»„ä»¶å†…çš„"),a("em",[t._v("æ‰€æœ‰")]),t._v("è°ƒç”¨â€œåŒæ„â€é˜»æ­¢æ›´æ–°æ—¶æ‰èƒ½ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„"),a("code",[t._v("ChatThread")]),t._v("å°†æ— æ³•æ›´æ–°"),a("code",[t._v("isTyping")]),t._v("prop çš„æ›´æ”¹ã€‚")]),t._v(" "),a("p",[t._v("æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½¿ç”¨è¿™äº›è¯­ä¹‰"),a("strong",[t._v("ä»»ä½•æ–°æ·»åŠ åˆ° ChatThread çš„ Hook å¦‚æœæ²¡æœ‰è°ƒç”¨ useBailout()å°†ä¼šæŸå")]),t._v("ã€‚å¦åˆ™ï¼Œä»–ä»¬ä¸èƒ½â€œåå¯¹â€ä½¿ç”¨"),a("code",[t._v("useWindowWidth()")]),t._v("å’Œ "),a("code",[t._v("useFriendStatus()")]),t._v("æ•‘åŠ©ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ç»“è®ºï¼š")]),t._v(" ğŸ”´ "),a("code",[t._v("useBailout()")]),t._v("æ‰“ç ´äº†æ„å»ºæ–¹å¼ï¼Œå°†å…¶æ·»åŠ åˆ° Hook ä¼šç ´åå…¶ä»– Hook çš„çŠ¶æ€æ›´æ–°ã€‚æˆ‘ä»¬å¸Œæœ› API å¯ä»¥å…·æœ‰"),a("a",{attrs:{href:"https://overreacted.io/optimized-for-change/",target:"_blank",rel:"noopener noreferrer"}},[t._v("é˜²ç¢æ€§"),a("OutboundLink")],1),t._v("ï¼Œè€Œè¿™ç§è¡Œä¸ºå´èƒŒé“è€Œé©°ã€‚")]),t._v(" "),a("h3",{attrs:{id:"è°ƒè¯•-debugging-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒè¯•-debugging-2"}},[t._v("#")]),t._v(" è°ƒè¯• Debugging")]),t._v(" "),a("p",[t._v("åƒ"),a("code",[t._v("useBailout()")]),t._v("è¿™æ ·çš„ Hook å¦‚ä½•å½±å“è°ƒè¯•ï¼Ÿ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„ç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ChatThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isTyping "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useWindowWidth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isOnline "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("friendID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChatLayout width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("FriendStatus isOnline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isTyping "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Typing..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ChatLayout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("å½“æˆ‘ä»¬æœŸæœ›"),a("code",[t._v("Typing...")]),t._v("æ ‡ç­¾ä¸ä¼šå‡ºç°ï¼Œå³ä¾¿åœ¨ä¸Šå±‚çš„ prop æ­£åœ¨å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬è¯¥æ€ä¹ˆè°ƒè¯•ï¼Ÿ")]),t._v(" "),a("p",[t._v("**é€šå¸¸ï¼Œåœ¨ React ä¸­ä½ è‡ªä¿¡å¯ä»¥é€šè¿‡æŸ¥æ‰¾æ¥ç»™å‡ºç¡®åˆ‡çš„å›ç­”ã€‚**å¦‚æœ"),a("code",[t._v("ChatThread")]),t._v("æ²¡èƒ½å¾—åˆ°ä¸€ä¸ªæ–°çš„"),a("code",[t._v("isTyping")]),t._v("å€¼ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€å‘ˆç°"),a("code",[t._v("<ChatThread isTyping={myVar} />")]),t._v("çš„ç»„ä»¶å¹¶æ£€æŸ¥"),a("code",[t._v("myVar")]),t._v("ï¼Œä»¥æ­¤ç±»æ¨ã€‚åœ¨å…¶ä¸­ä¸€ä¸ªçº§åˆ«ï¼Œæˆ‘ä»¬è¦ä¹ˆæ‰¾åˆ°ä¸€ä¸ªé”™è¯¯çš„"),a("code",[t._v("shouldComponentUpdate()")]),t._v("æ•‘åŠ©ï¼Œè¦ä¹ˆä¼ é€’ä¸æ­£ç¡®çš„"),a("code",[t._v("isTyping")]),t._v("å€¼ã€‚ä¸€çœ‹é“¾ä¸­çš„æ¯ä¸ªç»„ä»¶é€šå¸¸è¶³ä»¥è¿½å¯»åˆ°é—®é¢˜çš„æ ¹æºã€‚")]),t._v(" "),a("p",[t._v("ä½†æ˜¯å¦‚æœè¿™ä¸ª"),a("code",[t._v("useBailout()")]),t._v("Hook æ˜¯çœŸçš„ï¼Œä½ æ°¸è¿œä¹Ÿä¸ä¼šçŸ¥é“æ›´æ–°è¢«è·³è¿‡çš„åŸå› ï¼ŒçŸ¥é“ä½ æ£€æŸ¥æˆ‘ä»¬çš„"),a("code",[t._v("ChatThread")]),t._v("åŠå…¶æ‰€æœ‰è€…é“¾ä¸­çš„ç»„ä»¶ä½¿ç”¨çš„"),a("em",[t._v("æ¯ä¸ªè‡ªå®šä¹‰ Hook")]),t._v("ï¼ˆçš„æ·±åº¦ï¼‰ã€‚ç”±äºæ¯ä¸ªçˆ¶ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ Hookï¼Œå› æ­¤"),a("RouterLink",{attrs:{to:"/archives/algorithm/1549245751.html"}},[t._v("æ‹“å±•")]),t._v("éå¸¸ç³Ÿç³•ã€‚")],1),t._v(" "),a("p",[t._v("å°±åƒä½ åœ¨æŠ½å±‰é‡Œå¯»æ‰¾ä¸€æŠŠèºä¸åˆ€ä¸€æ ·ï¼Œæ¯ä¸ªæŠ½ç»éƒ½æœ‰ä¸€å †è¾ƒå°çš„æŠ½å±‰æŸœï¼Œä½ ä¸çŸ¥é“å…”å­æ´æœ‰å¤šæ·±ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ç»“è®ºï¼š")]),t._v(" ğŸ”´ "),a("code",[t._v("useBailout()")]),t._v("Hook ä¸ä»…æ‰“ç ´äº†æ„å»ºï¼Œæ›´å¤§å¤§å¢åŠ äº†è°ƒè¯•æ­¥éª¤å’Œæ±‚åŠ©æ‰€éœ€çš„è®¤çŸ¥é—¨æ§›â€”â€”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‘ˆæŒ‡æ•°å¼å¢åŠ ã€‚")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("æˆ‘ä»¬åªçœ‹åˆ°äº†ä¸€ä¸ªçœŸæ­£çš„ Hookï¼Œ"),a("code",[t._v("useState()")]),t._v("ï¼Œè¿˜æœ‰ä¸€ä¸ªå…³äº"),a("em",[t._v("ä¸è¯¥ä½¿ç”¨")]),t._v("Hook çš„å¸¸è§„å»ºè®®â€”â€”"),a("code",[t._v("useBailout()")]),t._v("ã€‚æˆ‘ä»¬é€šè¿‡æ„å»ºå’Œè°ƒè¯•çš„æ£±é•œå¯¹ä»–ä»¬è¿›è¡Œäº†æ¯”è¾ƒï¼Œè®¨è®ºäº†å®ƒä»¬ä¸­å·¥ä½œä¸å¦çš„åŸå› ã€‚")]),t._v(" "),a("p",[t._v("è™½ç„¶æ²¡æœ‰"),a("code",[t._v("memo()")]),t._v("å’Œ"),a("code",[t._v("shouldComponentUpdate()")]),t._v("çš„â€œHook ç‰ˆæœ¬â€ï¼Œä½† React"),a("em",[t._v("ä¼š")]),t._v("æä¾›ä¸€ä¸ª Hook è°ƒç”¨"),a("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#usememo",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("useMemo()")]),a("OutboundLink")],1),t._v("çš„æ–¹æ³•ã€‚å®ƒæœ‰ç±»ä¼¼çš„ç”¨é€”ï¼Œä½†å®ƒè¯­ä¹‰ä¸åŒï¼Œå¹¶ä¸ä¼šé­é‡ä¸Šè¿°é™·é˜±ã€‚")]),t._v(" "),a("p",[a("code",[t._v("useBailout()")]),t._v("åªæ˜¯ä¸€ä¸ªä¸è¯¥ä½¿ç”¨ Hook å·¥ä½œçš„ä¾‹å­ï¼Œè¿˜æœ‰å¾ˆå¤šç±»ä¼¼çš„â€”â€”ä¾‹å¦‚ï¼š"),a("code",[t._v("useProvider()")]),t._v("ï¼Œ"),a("code",[t._v("useCatch()")]),t._v("æˆ–"),a("code",[t._v("useSuspense()")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ä½ æ˜ç™½ä¸ºä»€ä¹ˆå—ï¼Ÿ")]),t._v(" "),a("p",[a("em",[t._v("ï¼ˆå°å£°ï¼šç»„æˆ...è°ƒè¯•...ï¼‰")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mobile.twitter.com/search?q=https%3A%2F%2Foverreacted.io%2Fwhy-isnt-x-a-hook%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("Discuss on Twitter"),a("OutboundLink")],1),t._v(" â€¢ "),a("a",{attrs:{href:"https://github.com/gaearon/overreacted.io/edit/master/src/pages/why-isnt-x-a-hook/index.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Edit on GitHub"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("åŸæ–‡é“¾æ¥ï¼š "),a("a",{attrs:{href:"https://overreacted.io/why-isnt-x-a-hook/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why Isn't X a Hook?"),a("OutboundLink")],1)]),t._v(" "),a("comment-comment")],1)}),[],!1,null,null,null);s.default=e.exports}}]);